<!DOCTYPE html>

<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <script src="https://kit.fontawesome.com/1205482781.js"></script>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
    integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    crossorigin="anonymous" />
  <link rel="stylesheet" type="text/css" href="style.css" />
  <title>Album</title>
</head>

<body>
  <div class="container-fluid">
    <div class="row">
      <!--SIDEBAR VERTICAL-->
      <div class="col-2">
        <nav class="navbar navbar-expand-lg navbar-expand-md navbar-white bg-navbar fixed-left justify-content-between"
          id="sidebar">
          <div class="nav-container">
            <a class="navbar-brand" href="index.html">
              <img src="logo/Spotify_Logo.png" alt="Spotify_Logo" width="131" height="40" />
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup"
              aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <div class="navbar-nav">
                <ul>
                  <li>
                    <a class="nav-item nav-link" href="index.html"><i class="fas fa-home fa-lg"></i>&nbsp; Home
                    </a>
                  </li>
                  <li>
                    <a class="nav-item nav-link" href="#"><i class="fas fa-book-open fa-lg"></i>&nbsp; Your
                      Library</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div class="nav-btn">
            <button class="btn signup-btn" type="button">Sign Up</button>
            <button class="btn login-btn" type="button">Login</button>
            <a href="#">Cookie Policy</a> |
            <a href="#"> Privacy</a>
          </div>
        </nav>
      </div>
      <!--END SIDEBAR VERTICAL-->

      <!--MAIN-->
      <div class="col-12 col-md-9 offset-md-3 mainPage">
        <div class="row mb-3">
          <div class="col-9 col-lg-11 mainLinks d-none d-md-flex">
            <a id="Rock" href="#">ROCK</a>
            <a id="Pop" href="#">POP</a>
            <a id="Hip Hop" href="#">HIP HOP</a>
            <a href="#">NEW RELEASES</a>
            <a href="#">DISCOVER</a>
          </div>
        </div>
        <div class="row">
          <div id="img-container" class="col-md-3 pt-5 text-center">
            <img src="https://m.media-amazon.com/images/I/51PA3bXknhL._SL500_.jpg" class="card-img img-fluid"
              alt="Album" />
            <div class="mt-4 text-center">
              <p class="album-title">... All this time</p>
            </div>
            <div class="text-center">
              <p class="artist-name">STING</p>
            </div>
            <div class="mt-4 text-center">
              <button id="btnPlay" class="btn btn-success" type="button">
                Play
              </button>
            </div>
          </div>
          <div class="col-md-8 p-5">
            <div class="row">
              <div id="trackList" class="col-md-10 mb-5">
                <div id="err"></div>
                <div class="py-3 trackHover">
                  <a href="#" class="card-title trackHover px-3" style="color: white">Song Title</a>
                  <small class="duration pr-3" style="color: white">
                    00:00
                  </small>
                </div>
                <div class="py-3 trackHover">
                  <a href="#" class="card-title trackHover px-3" style="color: white">Song Title</a>
                  <small class="duration pr-3" style="color: white">
                    00:00
                  </small>
                </div>
                <div class="py-3 trackHover">
                  <a href="#" class="card-title trackHover px-3" style="color: white">Song Title</a>
                  <small class="duration pr-3" style="color: white">
                    00:00
                  </small>
                </div>
                <div class="py-3 trackHover">
                  <a href="#" class="card-title trackHover px-3" style="color: white">Song Title</a>
                  <small class="duration pr-3" style="color: white">
                    00:00
                  </small>
                </div>
                <div class="py-3 trackHover">
                  <a href="#" class="card-title trackHover px-3" style="color: white">Song Title</a>
                  <small class="duration pr-3" style="color: white">
                    00:00
                  </small>
                </div>
                <div class="py-3 trackHover">
                  <a href="#" class="card-title trackHover px-3" style="color: white">Song Title</a>
                  <small class="duration pr-3" style="color: white">
                    00:00
                  </small>
                </div>
                <div class="py-3 trackHover">
                  <a href="#" class="card-title trackHover px-3" style="color: white">Song Title</a>
                  <small class="duration pr-3" style="color: white">
                    00:00
                  </small>
                </div>
                <div class="py-3 trackHover">
                  <a href="#" class="card-title trackHover px-3" style="color: white">Song Title</a>
                  <small class="duration pr-3" style="color: white">
                    00:00
                  </small>
                </div>
                <div class="py-3 trackHover">
                  <a href="#" class="card-title trackHover px-3" style="color: white">Song Title</a>
                  <small class="duration pr-3" style="color: white">
                    00:00
                  </small>
                </div>
                <div class="py-3 trackHover">
                  <a href="#" class="card-title trackHover px-3" style="color: white">Song Title</a>
                  <small class="duration pr-3" style="color: white">
                    00:00
                  </small>
                </div>
                <div class="py-3 trackHover">
                  <a href="#" class="card-title trackHover px-3" style="color: white">Song Title</a>
                  <small class="duration pr-3" style="color: white">
                    00:00
                  </small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--END MAIN-->

  <!--NAVBAR FLEX-BOTTOM-->
  <div class="player container-fluid fixed-bottom bg-container pt-1">
    <div class="row">
      <div class="col-lg-10">
        <div class="row flex-nowrap justify-content-between playBar py-3">
          <div class="col-auto">
            <div class="playerArtistInfo d-flex">
              <img />
              <div class="d-flex flex-column pl-2">
                <h6></h6>
                <p></p>
              </div>
            </div>
          </div>
          <div class="col-6">
            <div class="playerControls w-50 d-flex justify-content-between">
              <a href="#">
                <img src="playerbuttons/Shuffle.png" alt="shuffle" />
              </a>
              <a href="#">
                <img src="playerbuttons/Previous.png" alt="previous" />
              </a>
              <a href="#" onclick="handlePlay()">
                <img src="playerbuttons/Play.png" alt="play" />
              </a>
              <a href="#">
                <img src="playerbuttons/Next.png" alt="next" />
              </a>
              <a href="#">
                <img src="playerbuttons/Repeat.png" alt="repeat" />
              </a>
            </div>
            <div class="progressContainer d-flex align-items-center">
              <span class="currentTime">00:00</span>
              <div class="progress w-100">
                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                  <audio></audio>
                </div>
              </div>
              <span class="duration">00:00</span>
            </div>
          </div>
          <div class="col-auto mr-3">
            <div class="playerVolume">
              <i class="fa fa-volume-up"></i>
              <input type="range" value="100" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--END NAVBAR BOTTOM-->

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
    crossorigin="anonymous"></script>

  <script>
    const URLparams = new URLSearchParams(window.location.search)
    const albumId = URLparams.get("albumId")

    const song = (trackInfo) => `<div class="py-3 trackHover">
                          <a href="#" class="card-title trackHover px-3" style="color: white">${trackInfo.title_short}</a>
                          <small class="duration pr-3" style="color: white">
                            ${("0" + Math.floor(trackInfo.duration / 60)).slice(-2)} : ${("0" + Math.floor(trackInfo.duration % 60)).slice(-2)}
                          </small>
                        </div>`

    window.onload = () => {
      fetch("https://striveschool-api.herokuapp.com/api/deezer/album/" + albumId)
        .then(resp => {
          if (resp.ok) {
            return resp.json()
          }
        }).then(albumObj => {
          console.log(albumObj)
          const imgContainer = document.getElementById("img-container")
          const img = imgContainer.querySelector("img")
          const albumTitle = imgContainer.querySelector(".album-title")
          albumTitle.innerText = albumObj.title
          const artistName = imgContainer.querySelector(".artist-name")
          artistName.innerText = albumObj.artist.name
          img.src = albumObj.cover_medium


          const trackList = document.getElementById("trackList")
          trackList.innerHTML = ""

          albumObj.tracks.data.forEach(track => {
            trackList.innerHTML += song(track)

          })
        })

    };
  </script>
</body>

</html>